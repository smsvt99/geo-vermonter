<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Geo-Vermonter</title>
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet">
    <script src="https://unpkg.com/@mapbox/leaflet-pip@latest/leaflet-pip.js"></script>
    <link rel="icon" type="image/png" href="pictures/flagMapVT.png">
    <link rel="stylesheet" href="geo.css" type="text/css">
    <script src="border.js"></script>
    <script src="geo.js"></script>
    <script src="VT_county_polygons.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin=""></script>
</head>

<body>
    <h1>Geo-Vermonter</h1>
    <div id="mapWrapper">
        <div id="map"></div>
    </div>
    <div id="infoWrapper">
        <div id="highscore">Highscore: ..</div>
        <div id="latitude">Latitude: ?</div>
        <div id="longitude">Longitude: ?</div>
        <div id="county">County: ?</div>
        <div id="score">Score: ?</div>
    </div>
    <div id="controls">
        <button id="start" onclick="startGame()">Start a Game</button>
        <button id="guess" onclick="guess()">Guess the Spot</button>
        <button id="quit" onclick="quit()">I Give Up!</button>
    </div>
    <nav id="nav">
        <p>Controls</p>
        <button id="north" onclick="north()">
            <i class="fas fa-chevron-circle-up"></i>
            <br>North</button>
        <button id="west" onclick="west()">
            <i class="fas fa-chevron-circle-left"></i> West</button>
        <button id="east" onclick="east()">East
            <i class="fas fa-chevron-circle-right"></i>
        </button>
        <button id="south" onclick="south()">South
            <br>
            <i class="fas fa-chevron-circle-down"></i>
        </button>
        <button id="zoomOut" onclick="zoomOut()">Zoom Out</button>
    </nav>
    <div id="alert"></div>
</body>
<script>
    let randomLat;
    let randomLong;
    let randomPair;
    let zoomLevel
    let realCounty;
    let score;
    let newLat
    let newLong
    let guessNumber = 0
    let zoomNumber = 0
    let highScore = localStorage.getItem('highscore')

    if (!isNaN(highScore)) {
        localStorage.setItem('highscore', score);
        document.getElementById("highscore").textContent = "Highscore: " + highScore
    } else if (highScore==="undefined"){
        document.getElementById("highscore").textContent = "Highscore: None set yet"
    }

    document.getElementById("guess").disabled = true;
    document.getElementById("quit").disabled = true;
    document.getElementById("zoomOut").disabled = true;
    document.getElementById("north").disabled = true;
    document.getElementById("south").disabled = true;
    document.getElementById("east").disabled = true;
    document.getElementById("west").disabled = true;

    let map = L.map('map', { zoomControl: false }).setView([43.7886, -72.7317], 7);
    mapLink =
        '<a href="http://www.esri.com/">Esri</a>';
    wholink =
        'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';
    L.tileLayer(
        'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; ' + mapLink + ', ' + wholink,
            maxZoom: 18,
            minZoom: 1,
        }).addTo(map);
    map.dragging.disable();
    map.touchZoom.disable();
    map.doubleClickZoom.disable();
    map.scrollWheelZoom.disable();
    map.boxZoom.disable();
    map.keyboard.disable();
    // let coords = border_data.geometry.coordinates[0]
    // let fixedCoords = coords.map((elem) => {
    //     let newArray = [elem[1], elem[0]]
    //     return newArray
    // })
    // let polygon = L.polygon([
    //     fixedCoords
    // ], { color: 'green', fillColor: 'white' }).addTo(map);
    let countyPolygon = L.geoJSON(county_data, { color: 'red' }).addTo(map)
    let borderPolygon = L.geoJSON(border_data, { color: 'green', fillColor: 'white' }).addTo(map)
</script>

</html>